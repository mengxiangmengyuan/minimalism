"use strict";

var _createClass = function () {
  function a(e, c) {
    for (var b = 0; b < c.length; b++) {
      var d = c[b];d.enumerable = d.enumerable || false;d.configurable = true;if ("value" in d) {
        d.writable = true;
      }Object.defineProperty(e, d.key, d);
    }
  }return function (d, b, c) {
    if (b) {
      a(d.prototype, b);
    }if (c) {
      a(d, c);
    }return d;
  };
}();function _classCallCheck(a, b) {
  if (!(a instanceof b)) {
    throw new TypeError("Cannot call a class as a function");
  }
}var ERROR_CONF = { KEY_ERR: 311, KEY_ERR_MSG: "key格式错误", PARAM_ERR: 310, PARAM_ERR_MSG: "请求参数信息有误", SYSTEM_ERR: 600, SYSTEM_ERR_MSG: "系统错误", WX_ERR_CODE: 1000, WX_OK_CODE: 200 };var BASE_URL = "https://apis.map.qq.com/ws/";var URL_SEARCH = BASE_URL + "place/v1/search";var URL_SUGGESTION = BASE_URL + "place/v1/suggestion";var URL_GET_GEOCODER = BASE_URL + "geocoder/v1/";var URL_CITY_LIST = BASE_URL + "district/v1/list";var URL_AREA_LIST = BASE_URL + "district/v1/getchildren";var URL_DISTANCE = BASE_URL + "distance/v1/";var Utils = { location2query: function location2query(c) {
    if (typeof c == "string") {
      return c;
    }var b = "";for (var a = 0; a < c.length; a++) {
      var e = c[a];if (!!b) {
        b += ";";
      }if (e.location) {
        b = b + e.location.lat + "," + e.location.lng;
      }if (e.latitude && e.longitude) {
        b = b + e.latitude + "," + e.longitude;
      }
    }return b;
  }, getWXLocation: function getWXLocation(c, b, a) {
    wx.getLocation({ type: "gcj02", success: c, fail: b, complete: a });
  }, getLocationParam: function getLocationParam(b) {
    if (typeof b == "string") {
      var a = b.split(",");if (a.length === 2) {
        b = { latitude: b.split(",")[0], longitude: b.split(",")[1] };
      } else {
        b = {};
      }
    }return b;
  }, polyfillParam: function polyfillParam(a) {
    a.success = a.success || function () {};a.fail = a.fail || function () {};a.complete = a.complete || function () {};
  }, checkParamKeyEmpty: function checkParamKeyEmpty(c, b) {
    if (!c[b]) {
      var a = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + b + "参数格式有误");c.fail(a);c.complete(a);return true;
    }return false;
  }, checkKeyword: function checkKeyword(a) {
    return !this.checkParamKeyEmpty(a, "keyword");
  }, checkLocation: function checkLocation(c) {
    var a = this.getLocationParam(c.location);if (!a || !a.latitude || !a.longitude) {
      var b = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + " location参数格式有误");c.fail(b);c.complete(b);return false;
    }return true;
  }, buildErrorConfig: function buildErrorConfig(a, b) {
    return { status: a, message: b };
  }, buildWxRequestConfig: function buildWxRequestConfig(c, a) {
    var b = this;a.header = { "content-type": "application/json" };a.method = "GET";a.success = function (d) {
      var e = d.data;if (e.status === 0) {
        c.success(e);
      } else {
        c.fail(e);
      }
    };a.fail = function (d) {
      d.statusCode = ERROR_CONF.WX_ERR_CODE;c.fail(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, result.errMsg));
    };a.complete = function (d) {
      var e = +d.statusCode;switch (e) {case ERROR_CONF.WX_ERR_CODE:
          c.complete(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, d.errMsg));break;case ERROR_CONF.WX_OK_CODE:
          var f = d.data;if (f.status === 0) {
            c.complete(f);
          } else {
            c.complete(b.buildErrorConfig(f.status, f.message));
          }break;default:
          c.complete(b.buildErrorConfig(ERROR_CONF.SYSTEM_ERR, ERROR_CONF.SYSTEM_ERR_MSG));}
    };return a;
  }, locationProcess: function locationProcess(f, e, c, a) {
    var d = this;c = c || function (g) {
      g.statusCode = ERROR_CONF.WX_ERR_CODE;f.fail(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
    };a = a || function (g) {
      if (g.statusCode == ERROR_CONF.WX_ERR_CODE) {
        f.complete(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
      }
    };if (!f.location) {
      d.getWXLocation(e, c, a);
    } else {
      if (d.checkLocation(f)) {
        var b = Utils.getLocationParam(f.location);e(b);
      }
    }
  } };var QQMapWX = function () {
  function b(i) {
    _classCallCheck(this, b);if (!i.key) {
      throw Error("key值不能为空");
    }this.key = i.key;
  }_createClass(b, [{ key: "search", value: function f(i) {
      var l = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var k = { keyword: i.keyword, orderby: i.orderby || "_distance", page_size: i.page_size || 10, page_index: i.page_index || 1, output: "json", key: l.key };if (i.address_format) {
        k.address_format = i.address_format;
      }if (i.filter) {
        k.filter = i.filter;
      }var n = i.distance || "1000";var j = i.auto_extend || 1;var m = function m(o) {
        k.boundary = "nearby(" + o.latitude + "," + o.longitude + "," + n + "," + j + ")";wx.request(Utils.buildWxRequestConfig(i, { url: URL_SEARCH, data: k }));
      };Utils.locationProcess(i, m);
    } }, { key: "getSuggestion", value: function h(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var j = { keyword: i.keyword, region: i.region || "全国", region_fix: i.region_fix || 0, policy: i.policy || 0, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_SUGGESTION, data: j }));
    } }, { key: "reverseGeocoder", value: function a(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { coord_type: i.coord_type || 5, get_poi: i.get_poi || 0, output: "json", key: k.key };if (i.poi_options) {
        j.poi_options = i.poi_options;
      }var l = function l(m) {
        j.location = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
      };Utils.locationProcess(i, l);
    } }, { key: "geocoder", value: function g(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "address")) {
        return;
      }var j = { address: i.address, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
    } }, { key: "getCityList", value: function c(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { output: "json", key: k.key };
      wx.request(Utils.buildWxRequestConfig(i, { url: URL_CITY_LIST, data: j }));
    } }, { key: "getDistrictByCityId", value: function d(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "id")) {
        return;
      }var j = { id: i.id || "", output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_AREA_LIST, data: j }));
    } }, { key: "calculateDistance", value: function e(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "to")) {
        return;
      }var j = { mode: i.mode || "walking", to: Utils.location2query(i.to), output: "json", key: k.key };var l = function l(m) {
        j.from = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_DISTANCE, data: j }));
      };if (i.from) {
        i.location = i.from;
      }Utils.locationProcess(i, l);
    } }]);return b;
}();module.exports = QQMapWX;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInFxbWFwLXd4LWpzc2RrLmpzIl0sIm5hbWVzIjpbIl9jcmVhdGVDbGFzcyIsImEiLCJlIiwiYyIsImIiLCJsZW5ndGgiLCJkIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b3R5cGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJUeXBlRXJyb3IiLCJFUlJPUl9DT05GIiwiS0VZX0VSUiIsIktFWV9FUlJfTVNHIiwiUEFSQU1fRVJSIiwiUEFSQU1fRVJSX01TRyIsIlNZU1RFTV9FUlIiLCJTWVNURU1fRVJSX01TRyIsIldYX0VSUl9DT0RFIiwiV1hfT0tfQ09ERSIsIkJBU0VfVVJMIiwiVVJMX1NFQVJDSCIsIlVSTF9TVUdHRVNUSU9OIiwiVVJMX0dFVF9HRU9DT0RFUiIsIlVSTF9DSVRZX0xJU1QiLCJVUkxfQVJFQV9MSVNUIiwiVVJMX0RJU1RBTkNFIiwiVXRpbHMiLCJsb2NhdGlvbjJxdWVyeSIsImxvY2F0aW9uIiwibGF0IiwibG5nIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZXRXWExvY2F0aW9uIiwid3giLCJnZXRMb2NhdGlvbiIsInR5cGUiLCJzdWNjZXNzIiwiZmFpbCIsImNvbXBsZXRlIiwiZ2V0TG9jYXRpb25QYXJhbSIsInNwbGl0IiwicG9seWZpbGxQYXJhbSIsImNoZWNrUGFyYW1LZXlFbXB0eSIsImJ1aWxkRXJyb3JDb25maWciLCJjaGVja0tleXdvcmQiLCJjaGVja0xvY2F0aW9uIiwic3RhdHVzIiwibWVzc2FnZSIsImJ1aWxkV3hSZXF1ZXN0Q29uZmlnIiwiaGVhZGVyIiwibWV0aG9kIiwiZGF0YSIsInN0YXR1c0NvZGUiLCJyZXN1bHQiLCJlcnJNc2ciLCJmIiwibG9jYXRpb25Qcm9jZXNzIiwiZyIsIlFRTWFwV1giLCJpIiwiRXJyb3IiLCJ2YWx1ZSIsImwiLCJrIiwia2V5d29yZCIsIm9yZGVyYnkiLCJwYWdlX3NpemUiLCJwYWdlX2luZGV4Iiwib3V0cHV0IiwiYWRkcmVzc19mb3JtYXQiLCJmaWx0ZXIiLCJuIiwiZGlzdGFuY2UiLCJqIiwiYXV0b19leHRlbmQiLCJtIiwibyIsImJvdW5kYXJ5IiwicmVxdWVzdCIsInVybCIsImgiLCJyZWdpb24iLCJyZWdpb25fZml4IiwicG9saWN5IiwiY29vcmRfdHlwZSIsImdldF9wb2kiLCJwb2lfb3B0aW9ucyIsImFkZHJlc3MiLCJpZCIsIm1vZGUiLCJ0byIsImZyb20iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLGVBQWEsWUFBVTtBQUFDLFdBQVNDLENBQVQsQ0FBV0MsQ0FBWCxFQUFhQyxDQUFiLEVBQWU7QUFBQyxTQUFJLElBQUlDLElBQUUsQ0FBVixFQUFZQSxJQUFFRCxFQUFFRSxNQUFoQixFQUF1QkQsR0FBdkIsRUFBMkI7QUFBQyxVQUFJRSxJQUFFSCxFQUFFQyxDQUFGLENBQU4sQ0FBV0UsRUFBRUMsVUFBRixHQUFhRCxFQUFFQyxVQUFGLElBQWMsS0FBM0IsQ0FBaUNELEVBQUVFLFlBQUYsR0FBZSxJQUFmLENBQW9CLElBQUcsV0FBV0YsQ0FBZCxFQUFnQjtBQUFDQSxVQUFFRyxRQUFGLEdBQVcsSUFBWDtBQUFnQixjQUFPQyxjQUFQLENBQXNCUixDQUF0QixFQUF3QkksRUFBRUssR0FBMUIsRUFBOEJMLENBQTlCO0FBQWlDO0FBQUMsVUFBTyxVQUFTQSxDQUFULEVBQVdGLENBQVgsRUFBYUQsQ0FBYixFQUFlO0FBQUMsUUFBR0MsQ0FBSCxFQUFLO0FBQUNILFFBQUVLLEVBQUVNLFNBQUosRUFBY1IsQ0FBZDtBQUFpQixTQUFHRCxDQUFILEVBQUs7QUFBQ0YsUUFBRUssQ0FBRixFQUFJSCxDQUFKO0FBQU8sWUFBT0csQ0FBUDtBQUFTLEdBQXBFO0FBQXFFLENBQS9QLEVBQWpCLENBQW1SLFNBQVNPLGVBQVQsQ0FBeUJaLENBQXpCLEVBQTJCRyxDQUEzQixFQUE2QjtBQUFDLE1BQUcsRUFBRUgsYUFBYUcsQ0FBZixDQUFILEVBQXFCO0FBQUMsVUFBTSxJQUFJVSxT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QyxVQUFJSSxJQUFFLElBQU4sQ0FBV0osSUFBRUEsS0FBRyxFQUFMLENBQVFsQyxNQUFNZ0IsYUFBTixDQUFvQmtCLENBQXBCLEVBQXVCLElBQUdsQyxNQUFNaUIsa0JBQU4sQ0FBeUJpQixDQUF6QixFQUEyQixJQUEzQixDQUFILEVBQW9DO0FBQUM7QUFBTyxXQUFJYyxJQUFFLEVBQUNnQixNQUFLOUIsRUFBRThCLElBQUYsSUFBUSxTQUFkLEVBQXdCQyxJQUFHakUsTUFBTUMsY0FBTixDQUFxQmlDLEVBQUUrQixFQUF2QixDQUEzQixFQUFzRHRCLFFBQU8sTUFBN0QsRUFBb0UvRCxLQUFJMEQsRUFBRTFELEdBQTFFLEVBQU4sQ0FBcUYsSUFBSXlELElBQUUsU0FBU0EsQ0FBVCxDQUFXYSxDQUFYLEVBQWE7QUFBQ0YsVUFBRWtCLElBQUYsR0FBT2hCLEVBQUU3QyxRQUFGLEdBQVcsR0FBWCxHQUFlNkMsRUFBRTVDLFNBQXhCLENBQWtDRSxHQUFHNkMsT0FBSCxDQUFXckQsTUFBTXVCLG9CQUFOLENBQTJCVyxDQUEzQixFQUE2QixFQUFDb0IsS0FBSXZELFlBQUwsRUFBa0IyQixNQUFLc0IsQ0FBdkIsRUFBN0IsQ0FBWDtBQUFvRSxPQUExSCxDQUEySCxJQUFHZCxFQUFFZ0MsSUFBTCxFQUFVO0FBQUNoQyxVQUFFaEMsUUFBRixHQUFXZ0MsRUFBRWdDLElBQWI7QUFBa0IsYUFBTW5DLGVBQU4sQ0FBc0JHLENBQXRCLEVBQXdCRyxDQUF4QjtBQUEyQixLQUEzWSxFQUR1aUcsQ0FBZixFQUN6b0YsT0FBT2hFLENBQVA7QUFBUyxDQUQ2aEYsRUFBWixDQUM5Z0Y4RixPQUFPQyxPQUFQLEdBQWVuQyxPQUFmIiwiZmlsZSI6InFxbWFwLXd4LWpzc2RrLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoZSxjKXtmb3IodmFyIGI9MDtiPGMubGVuZ3RoO2IrKyl7dmFyIGQ9Y1tiXTtkLmVudW1lcmFibGU9ZC5lbnVtZXJhYmxlfHxmYWxzZTtkLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcIiBpbiBkKXtkLndyaXRhYmxlPXRydWV9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsZC5rZXksZCl9fXJldHVybiBmdW5jdGlvbihkLGIsYyl7aWYoYil7YShkLnByb3RvdHlwZSxiKX1pZihjKXthKGQsYyl9cmV0dXJuIGR9fSgpO2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX12YXIgRVJST1JfQ09ORj17S0VZX0VSUjozMTEsS0VZX0VSUl9NU0c6XCJrZXnmoLzlvI/plJnor69cIixQQVJBTV9FUlI6MzEwLFBBUkFNX0VSUl9NU0c6XCLor7fmsYLlj4LmlbDkv6Hmga/mnInor69cIixTWVNURU1fRVJSOjYwMCxTWVNURU1fRVJSX01TRzpcIuezu+e7n+mUmeivr1wiLFdYX0VSUl9DT0RFOjEwMDAsV1hfT0tfQ09ERToyMDB9O3ZhciBCQVNFX1VSTD1cImh0dHBzOi8vYXBpcy5tYXAucXEuY29tL3dzL1wiO3ZhciBVUkxfU0VBUkNIPUJBU0VfVVJMK1wicGxhY2UvdjEvc2VhcmNoXCI7dmFyIFVSTF9TVUdHRVNUSU9OPUJBU0VfVVJMK1wicGxhY2UvdjEvc3VnZ2VzdGlvblwiO3ZhciBVUkxfR0VUX0dFT0NPREVSPUJBU0VfVVJMK1wiZ2VvY29kZXIvdjEvXCI7dmFyIFVSTF9DSVRZX0xJU1Q9QkFTRV9VUkwrXCJkaXN0cmljdC92MS9saXN0XCI7dmFyIFVSTF9BUkVBX0xJU1Q9QkFTRV9VUkwrXCJkaXN0cmljdC92MS9nZXRjaGlsZHJlblwiO3ZhciBVUkxfRElTVEFOQ0U9QkFTRV9VUkwrXCJkaXN0YW5jZS92MS9cIjt2YXIgVXRpbHM9e2xvY2F0aW9uMnF1ZXJ5OmZ1bmN0aW9uIGxvY2F0aW9uMnF1ZXJ5KGMpe2lmKHR5cGVvZiBjPT1cInN0cmluZ1wiKXtyZXR1cm4gY312YXIgYj1cIlwiO2Zvcih2YXIgYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgZT1jW2FdO2lmKCEhYil7Yis9XCI7XCJ9aWYoZS5sb2NhdGlvbil7Yj1iK2UubG9jYXRpb24ubGF0K1wiLFwiK2UubG9jYXRpb24ubG5nfWlmKGUubGF0aXR1ZGUmJmUubG9uZ2l0dWRlKXtiPWIrZS5sYXRpdHVkZStcIixcIitlLmxvbmdpdHVkZX19cmV0dXJuIGJ9LGdldFdYTG9jYXRpb246ZnVuY3Rpb24gZ2V0V1hMb2NhdGlvbihjLGIsYSl7d3guZ2V0TG9jYXRpb24oe3R5cGU6XCJnY2owMlwiLHN1Y2Nlc3M6YyxmYWlsOmIsY29tcGxldGU6YX0pfSxnZXRMb2NhdGlvblBhcmFtOmZ1bmN0aW9uIGdldExvY2F0aW9uUGFyYW0oYil7aWYodHlwZW9mIGI9PVwic3RyaW5nXCIpe3ZhciBhPWIuc3BsaXQoXCIsXCIpO2lmKGEubGVuZ3RoPT09Mil7Yj17bGF0aXR1ZGU6Yi5zcGxpdChcIixcIilbMF0sbG9uZ2l0dWRlOmIuc3BsaXQoXCIsXCIpWzFdfX1lbHNle2I9e319fXJldHVybiBifSxwb2x5ZmlsbFBhcmFtOmZ1bmN0aW9uIHBvbHlmaWxsUGFyYW0oYSl7YS5zdWNjZXNzPWEuc3VjY2Vzc3x8ZnVuY3Rpb24oKXt9O2EuZmFpbD1hLmZhaWx8fGZ1bmN0aW9uKCl7fTthLmNvbXBsZXRlPWEuY29tcGxldGV8fGZ1bmN0aW9uKCl7fX0sY2hlY2tQYXJhbUtleUVtcHR5OmZ1bmN0aW9uIGNoZWNrUGFyYW1LZXlFbXB0eShjLGIpe2lmKCFjW2JdKXt2YXIgYT10aGlzLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5QQVJBTV9FUlIsRVJST1JfQ09ORi5QQVJBTV9FUlJfTVNHK2IrXCLlj4LmlbDmoLzlvI/mnInor69cIik7Yy5mYWlsKGEpO2MuY29tcGxldGUoYSk7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSxjaGVja0tleXdvcmQ6ZnVuY3Rpb24gY2hlY2tLZXl3b3JkKGEpe3JldHVybiAhdGhpcy5jaGVja1BhcmFtS2V5RW1wdHkoYSxcImtleXdvcmRcIil9LGNoZWNrTG9jYXRpb246ZnVuY3Rpb24gY2hlY2tMb2NhdGlvbihjKXt2YXIgYT10aGlzLmdldExvY2F0aW9uUGFyYW0oYy5sb2NhdGlvbik7aWYoIWF8fCFhLmxhdGl0dWRlfHwhYS5sb25naXR1ZGUpe3ZhciBiPXRoaXMuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLlBBUkFNX0VSUixFUlJPUl9DT05GLlBBUkFNX0VSUl9NU0crXCIgbG9jYXRpb27lj4LmlbDmoLzlvI/mnInor69cIik7Yy5mYWlsKGIpO2MuY29tcGxldGUoYik7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSxidWlsZEVycm9yQ29uZmlnOmZ1bmN0aW9uIGJ1aWxkRXJyb3JDb25maWcoYSxiKXtyZXR1cm57c3RhdHVzOmEsbWVzc2FnZTpifX0sYnVpbGRXeFJlcXVlc3RDb25maWc6ZnVuY3Rpb24gYnVpbGRXeFJlcXVlc3RDb25maWcoYyxhKXt2YXIgYj10aGlzO2EuaGVhZGVyPXtcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifTthLm1ldGhvZD1cIkdFVFwiO2Euc3VjY2Vzcz1mdW5jdGlvbihkKXt2YXIgZT1kLmRhdGE7aWYoZS5zdGF0dXM9PT0wKXtjLnN1Y2Nlc3MoZSl9ZWxzZXtjLmZhaWwoZSl9fTthLmZhaWw9ZnVuY3Rpb24oZCl7ZC5zdGF0dXNDb2RlPUVSUk9SX0NPTkYuV1hfRVJSX0NPREU7Yy5mYWlsKGIuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLldYX0VSUl9DT0RFLHJlc3VsdC5lcnJNc2cpKX07YS5jb21wbGV0ZT1mdW5jdGlvbihkKXt2YXIgZT0rZC5zdGF0dXNDb2RlO3N3aXRjaChlKXtjYXNlIEVSUk9SX0NPTkYuV1hfRVJSX0NPREU6Yy5jb21wbGV0ZShiLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxkLmVyck1zZykpO2JyZWFrO2Nhc2UgRVJST1JfQ09ORi5XWF9PS19DT0RFOnZhciBmPWQuZGF0YTtpZihmLnN0YXR1cz09PTApe2MuY29tcGxldGUoZil9ZWxzZXtjLmNvbXBsZXRlKGIuYnVpbGRFcnJvckNvbmZpZyhmLnN0YXR1cyxmLm1lc3NhZ2UpKX1icmVhaztkZWZhdWx0OmMuY29tcGxldGUoYi5idWlsZEVycm9yQ29uZmlnKEVSUk9SX0NPTkYuU1lTVEVNX0VSUixFUlJPUl9DT05GLlNZU1RFTV9FUlJfTVNHKSl9fTtyZXR1cm4gYX0sbG9jYXRpb25Qcm9jZXNzOmZ1bmN0aW9uIGxvY2F0aW9uUHJvY2VzcyhmLGUsYyxhKXt2YXIgZD10aGlzO2M9Y3x8ZnVuY3Rpb24oZyl7Zy5zdGF0dXNDb2RlPUVSUk9SX0NPTkYuV1hfRVJSX0NPREU7Zi5mYWlsKGQuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLldYX0VSUl9DT0RFLGcuZXJyTXNnKSl9O2E9YXx8ZnVuY3Rpb24oZyl7aWYoZy5zdGF0dXNDb2RlPT1FUlJPUl9DT05GLldYX0VSUl9DT0RFKXtmLmNvbXBsZXRlKGQuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLldYX0VSUl9DT0RFLGcuZXJyTXNnKSl9fTtpZighZi5sb2NhdGlvbil7ZC5nZXRXWExvY2F0aW9uKGUsYyxhKX1lbHNle2lmKGQuY2hlY2tMb2NhdGlvbihmKSl7dmFyIGI9VXRpbHMuZ2V0TG9jYXRpb25QYXJhbShmLmxvY2F0aW9uKTtlKGIpfX19fTt2YXIgUVFNYXBXWD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoaSl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsYik7aWYoIWkua2V5KXt0aHJvdyBFcnJvcihcImtleeWAvOS4jeiDveS4uuepulwiKX10aGlzLmtleT1pLmtleX1fY3JlYXRlQ2xhc3MoYixbe2tleTpcInNlYXJjaFwiLHZhbHVlOmZ1bmN0aW9uIGYoaSl7dmFyIGw9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7aWYoIVV0aWxzLmNoZWNrS2V5d29yZChpKSl7cmV0dXJufXZhciBrPXtrZXl3b3JkOmkua2V5d29yZCxvcmRlcmJ5Omkub3JkZXJieXx8XCJfZGlzdGFuY2VcIixwYWdlX3NpemU6aS5wYWdlX3NpemV8fDEwLHBhZ2VfaW5kZXg6aS5wYWdlX2luZGV4fHwxLG91dHB1dDpcImpzb25cIixrZXk6bC5rZXl9O2lmKGkuYWRkcmVzc19mb3JtYXQpe2suYWRkcmVzc19mb3JtYXQ9aS5hZGRyZXNzX2Zvcm1hdH1pZihpLmZpbHRlcil7ay5maWx0ZXI9aS5maWx0ZXJ9dmFyIG49aS5kaXN0YW5jZXx8XCIxMDAwXCI7dmFyIGo9aS5hdXRvX2V4dGVuZHx8MTt2YXIgbT1mdW5jdGlvbiBtKG8pe2suYm91bmRhcnk9XCJuZWFyYnkoXCIrby5sYXRpdHVkZStcIixcIitvLmxvbmdpdHVkZStcIixcIituK1wiLFwiK2orXCIpXCI7d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX1NFQVJDSCxkYXRhOmt9KSl9O1V0aWxzLmxvY2F0aW9uUHJvY2VzcyhpLG0pfX0se2tleTpcImdldFN1Z2dlc3Rpb25cIix2YWx1ZTpmdW5jdGlvbiBoKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKCFVdGlscy5jaGVja0tleXdvcmQoaSkpe3JldHVybn12YXIgaj17a2V5d29yZDppLmtleXdvcmQscmVnaW9uOmkucmVnaW9ufHxcIuWFqOWbvVwiLHJlZ2lvbl9maXg6aS5yZWdpb25fZml4fHwwLHBvbGljeTppLnBvbGljeXx8MCxvdXRwdXQ6XCJqc29uXCIsa2V5Omsua2V5fTt3eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfU1VHR0VTVElPTixkYXRhOmp9KSl9fSx7a2V5OlwicmV2ZXJzZUdlb2NvZGVyXCIsdmFsdWU6ZnVuY3Rpb24gYShpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTt2YXIgaj17Y29vcmRfdHlwZTppLmNvb3JkX3R5cGV8fDUsZ2V0X3BvaTppLmdldF9wb2l8fDAsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07aWYoaS5wb2lfb3B0aW9ucyl7ai5wb2lfb3B0aW9ucz1pLnBvaV9vcHRpb25zfXZhciBsPWZ1bmN0aW9uIGwobSl7ai5sb2NhdGlvbj1tLmxhdGl0dWRlK1wiLFwiK20ubG9uZ2l0dWRlO3d4LnJlcXVlc3QoVXRpbHMuYnVpbGRXeFJlcXVlc3RDb25maWcoaSx7dXJsOlVSTF9HRVRfR0VPQ09ERVIsZGF0YTpqfSkpfTtVdGlscy5sb2NhdGlvblByb2Nlc3MoaSxsKX19LHtrZXk6XCJnZW9jb2RlclwiLHZhbHVlOmZ1bmN0aW9uIGcoaSl7dmFyIGs9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7aWYoVXRpbHMuY2hlY2tQYXJhbUtleUVtcHR5KGksXCJhZGRyZXNzXCIpKXtyZXR1cm59dmFyIGo9e2FkZHJlc3M6aS5hZGRyZXNzLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O3d4LnJlcXVlc3QoVXRpbHMuYnVpbGRXeFJlcXVlc3RDb25maWcoaSx7dXJsOlVSTF9HRVRfR0VPQ09ERVIsZGF0YTpqfSkpfX0se2tleTpcImdldENpdHlMaXN0XCIsdmFsdWU6ZnVuY3Rpb24gYyhpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTt2YXIgaj17b3V0cHV0OlwianNvblwiLGtleTprLmtleX07XG53eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfQ0lUWV9MSVNULGRhdGE6an0pKX19LHtrZXk6XCJnZXREaXN0cmljdEJ5Q2l0eUlkXCIsdmFsdWU6ZnVuY3Rpb24gZChpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTtpZihVdGlscy5jaGVja1BhcmFtS2V5RW1wdHkoaSxcImlkXCIpKXtyZXR1cm59dmFyIGo9e2lkOmkuaWR8fFwiXCIsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0FSRUFfTElTVCxkYXRhOmp9KSl9fSx7a2V5OlwiY2FsY3VsYXRlRGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbiBlKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKFV0aWxzLmNoZWNrUGFyYW1LZXlFbXB0eShpLFwidG9cIikpe3JldHVybn12YXIgaj17bW9kZTppLm1vZGV8fFwid2Fsa2luZ1wiLHRvOlV0aWxzLmxvY2F0aW9uMnF1ZXJ5KGkudG8pLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O3ZhciBsPWZ1bmN0aW9uIGwobSl7ai5mcm9tPW0ubGF0aXR1ZGUrXCIsXCIrbS5sb25naXR1ZGU7d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0RJU1RBTkNFLGRhdGE6an0pKX07aWYoaS5mcm9tKXtpLmxvY2F0aW9uPWkuZnJvbX1VdGlscy5sb2NhdGlvblByb2Nlc3MoaSxsKX19XSk7cmV0dXJuIGJ9KCk7bW9kdWxlLmV4cG9ydHM9UVFNYXBXWDsiXX0=